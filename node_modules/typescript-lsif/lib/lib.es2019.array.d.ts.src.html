<span class="hljs-comment">/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */</span>



<span class="hljs-comment">/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</span>


<span class="hljs-keyword">type</span> <span class="hljs-title class_">FlatArray</span>&lt;<span class="hljs-title class_">Arr</span>, <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">number</span>&gt; = {
    <span class="hljs-string">&quot;done&quot;</span>: <span class="hljs-title class_">Arr</span>,
    <span class="hljs-string">&quot;recur&quot;</span>: <span class="hljs-title class_">Arr</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ReadonlyArray</span>&lt;infer <span class="hljs-title class_">InnerArr</span>&gt;
        ? <span class="hljs-title class_">FlatArray</span>&lt;<span class="hljs-title class_">InnerArr</span>, [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>][<span class="hljs-title class_">Depth</span>]&gt;
        : <span class="hljs-title class_">Arr</span>
}[<span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> -<span class="hljs-number">1</span> ? <span class="hljs-string">&quot;done&quot;</span> : <span class="hljs-string">&quot;recur&quot;</span>];

<span class="hljs-keyword">interface</span> ReadonlyArray&lt;T&gt; {

    <span class="hljs-comment">/**
     * Calls a defined callback function on each element of an array. Then, flattens the result into
     * a new array.
     * This is identical to a map followed by flat with depth 1.
     *
     * <span class="hljs-doctag">@param</span> callback A function that accepts up to three arguments. The flatMap method calls the
     * callback function one time for each element in the array.
     * <span class="hljs-doctag">@param</span> thisArg An object to which the this keyword can refer in the callback function. If
     * thisArg is omitted, undefined is used as the this value.
     */</span>
    flatMap&lt;U, <span class="hljs-title class_">This</span> = <span class="hljs-literal">undefined</span>&gt; (
        <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-variable language_">this</span>: This, value: T, index: <span class="hljs-built_in">number</span>, array: T[]</span>) =&gt;</span> U | <span class="hljs-title class_">ReadonlyArray</span>&lt;U&gt;,
        thisArg?: <span class="hljs-title class_">This</span>
    ): U[]


    <span class="hljs-comment">/**
     * Returns a new array with all sub-array elements concatenated into it recursively up to the
     * specified depth.
     *
     * <span class="hljs-doctag">@param</span> depth The maximum recursion depth
     */</span>
    flat&lt;A, D <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">number</span> = <span class="hljs-number">1</span>&gt;(
        <span class="hljs-attr">this</span>: A,
        depth?: D
    ): <span class="hljs-title class_">FlatArray</span>&lt;A, D&gt;[]
  }

<span class="hljs-keyword">interface</span> <span id="lsif6677">Array</span>&lt;T&gt; {

    <span class="hljs-comment">/**
     * Calls a defined callback function on each element of an array. Then, flattens the result into
     * a new array.
     * This is identical to a map followed by flat with depth 1.
     *
     * <span class="hljs-doctag">@param</span> callback A function that accepts up to three arguments. The flatMap method calls the
     * callback function one time for each element in the array.
     * <span class="hljs-doctag">@param</span> thisArg An object to which the this keyword can refer in the callback function. If
     * thisArg is omitted, undefined is used as the this value.
     */</span>
    <span id="lsif7818">flatMap</span>&lt;U, <span class="hljs-title class_">This</span> = <span class="hljs-literal">undefined</span>&gt; (
        <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-variable language_">this</span>: This, value: T, index: <span class="hljs-built_in">number</span>, array: T[]</span>) =&gt;</span> U | <span class="hljs-title class_">ReadonlyArray</span>&lt;U&gt;,
        thisArg?: <span class="hljs-title class_">This</span>
    ): U[]

    <span class="hljs-comment">/**
     * Returns a new array with all sub-array elements concatenated into it recursively up to the
     * specified depth.
     *
     * <span class="hljs-doctag">@param</span> depth The maximum recursion depth
     */</span>
    flat&lt;A, D <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">number</span> = <span class="hljs-number">1</span>&gt;(
        <span class="hljs-attr">this</span>: A,
        depth?: D
    ): <span class="hljs-title class_">FlatArray</span>&lt;A, D&gt;[]
}
